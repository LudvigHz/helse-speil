fragment simulering on Simulering {
    fagsystemId
    totalbelop
    tidsstempel
    utbetalingslinjer {
        fom
        tom
        dagsats
        grad
    }
    perioder {
        fom
        tom
        utbetalinger {
            mottakerId
            mottakerNavn
            forfall
            feilkonto
            detaljer {
                fom
                tom
                utbetalingstype
                uforegrad
                typeSats
                tilbakeforing
                sats
                refunderesOrgNr
                konto
                klassekode
                antallSats
                belop
                klassekodebeskrivelse
            }
        }
    }
}

fragment vilkarsgrunnlag on Vilkarsgrunnlag {
    id
    sykepengegrunnlag
    skjaeringstidspunkt
    omregnetArsinntekt
    sammenligningsgrunnlag
    inntekter {
        sammenligningsgrunnlag {
            belop
            inntektFraAOrdningen {
                maned
                sum
            }
        }
        omregnetArsinntekt {
            inntektFraAOrdningen {
                maned
                sum
            }
            belop
            manedsbelop
            kilde
        }
        arbeidsgiver
        deaktivert
    }
    arbeidsgiverrefusjoner {
        arbeidsgiver
        refusjonsopplysninger {
            fom
            tom
            belop
            meldingsreferanseId
        }
    }
    vilkarsgrunnlagtype
    ... on VilkarsgrunnlagSpleis {
        oppfyllerKravOmMinstelonn
        oppfyllerKravOmMedlemskap
        oppfyllerKravOmOpptjening
        antallOpptjeningsdagerErMinst
        grunnbelop
        avviksprosent
        opptjeningFra
        sykepengegrunnlagsgrense {
            grunnbelop
            grense
            virkningstidspunkt
        }
    }
}

query FetchPerson($fnr: String, $aktorId: String) {
    person(fnr: $fnr, aktorId: $aktorId) {
        fodselsnummer
        dodsdato
        enhet {
            id
            navn
        }
        infotrygdutbetalinger {
            organisasjonsnummer
            dagsats
            fom
            tom
            grad
            typetekst
        }
        personinfo {
            fornavn
            mellomnavn
            etternavn
            adressebeskyttelse
            fodselsdato
            kjonn
            reservasjon {
                kanVarsles
                reservert
            }
        }
        tildeling {
            navn
            epost
            oid
            reservert
        }
        versjon
        vilkarsgrunnlag {
            ...vilkarsgrunnlag
        }
        aktorId
        arbeidsgivere {
            bransjer
            navn
            organisasjonsnummer
            arbeidsforhold {
                sluttdato
                startdato
                stillingsprosent
                stillingstittel
            }
            ghostPerioder {
                id
                deaktivert
                vilkarsgrunnlagId
                skjaeringstidspunkt
                fom
                tom
                organisasjonsnummer
            }
            generasjoner {
                id
                perioder {
                    fom
                    tom
                    erForkastet
                    inntektstype
                    opprettet
                    periodetype
                    tidslinje {
                        dato
                        grad
                        kilde {
                            id
                            type
                        }
                        sykdomsdagtype
                        utbetalingsdagtype
                        utbetalingsinfo {
                            arbeidsgiverbelop
                            inntekt
                            personbelop
                            refusjonsbelop
                            totalGrad
                            utbetaling
                        }
                        begrunnelser
                    }
                    vedtaksperiodeId
                    periodetilstand
                    skjaeringstidspunkt
                    ... on UberegnetPeriode {
                        id
                    }
                    ... on BeregnetPeriode {
                        id
                        inntektFraAordningen {
                            maned
                            sum
                        }
                        aktivitetslogg {
                            alvorlighetsgrad
                            melding
                            tidsstempel
                            vedtaksperiodeId
                        }
                        beregningId
                        forbrukteSykedager
                        gjenstaendeSykedager
                        beslutterSaksbehandlerOid
                        notater {
                            id
                            tekst
                            opprettet
                            saksbehandlerOid
                            saksbehandlerNavn
                            saksbehandlerEpost
                            saksbehandlerIdent
                            vedtaksperiodeId
                            feilregistrert
                            feilregistrert_tidspunkt
                            type
                            kommentarer {
                                id
                                tekst
                                opprettet
                                saksbehandlerident
                                feilregistrert_tidspunkt
                            }
                        }
                        periodehistorikk {
                            type
                            timestamp
                            saksbehandler_ident
                            notat_id
                        }
                        hendelser {
                            id
                            type
                            ... on Inntektsmelding {
                                beregnetInntekt
                                mottattDato
                            }
                            ... on Sykmelding {
                                fom
                                tom
                                rapportertDato
                            }
                            ... on SoknadNav {
                                fom
                                tom
                                rapportertDato
                                sendtNav
                            }
                            ... on SoknadArbeidsgiver {
                                fom
                                tom
                                rapportertDato
                                sendtArbeidsgiver
                            }
                        }
                        maksdato
                        periodevilkar {
                            alder {
                                alderSisteSykedag
                                oppfylt
                            }
                            soknadsfrist {
                                oppfylt
                                sendtNav
                                soknadFom
                                soknadTom
                            }
                            sykepengedager {
                                forbrukteSykedager
                                gjenstaendeSykedager
                                maksdato
                                oppfylt
                                skjaeringstidspunkt
                            }
                        }
                        risikovurdering {
                            funn {
                                beskrivelse
                                kategori
                            }
                            kontrollertOk {
                                beskrivelse
                                kategori
                            }
                        }
                        utbetaling {
                            id,
                            arbeidsgiverFagsystemId
                            arbeidsgiverNettoBelop
                            personFagsystemId
                            personNettoBelop
                            status
                            type
                            vurdering {
                                automatisk
                                godkjent
                                ident
                                tidsstempel
                            }
                            arbeidsgiversimulering {
                                ...simulering
                            }
                            personsimulering {
                                ...simulering
                            }
                        }
                        varsler
                        varslerForGenerasjon {
                            generasjonId
                            definisjonId
                            kode
                            tittel
                            forklaring
                            handling
                            vurdering {
                                ident
                                status
                                tidsstempel
                            }
                        }
                        vilkarsgrunnlagId
                        oppgave {
                            id
                            erRetur
                            erBeslutter
                            tidligereSaksbehandler
                            trengerTotrinnsvurdering
                        }
                    }
                }
            }
            overstyringer {
                begrunnelse
                hendelseId
                saksbehandler {
                    ident
                    navn
                }
                timestamp
                __typename
                ... on Dagoverstyring {
                    dager {
                        grad
                        fraGrad
                        dato
                        type
                        fraType
                    }
                }
                ... on Inntektoverstyring {
                    inntekt {
                        skjaeringstidspunkt
                        forklaring
                        manedligInntekt
                        fraManedligInntekt
                        refusjonsopplysninger {
                            fom
                            tom
                            belop
                        }
                        fraRefusjonsopplysninger {
                            fom
                            tom
                            belop
                        }
                    }
                }
                ... on Arbeidsforholdoverstyring {
                    deaktivert
                    skjaeringstidspunkt
                    forklaring
                }
            }
        }
    }
}
